<p id="notice"><%= notice %></p>

<h1><%= @recipe.name %></h1>
<p>Created by <%= full_name_of(@recipe.user) %></p>

<p>
  <strong>Method:</strong>
  <%= @recipe.method %>
</p>

<p>
  <strong>Source:</strong>
  <%= @recipe.source %>
</p>

<p>
  <strong>Tip:</strong>
  <%= @recipe.tip %>
</p>

<p>
  <strong>Serving:</strong>
  <%= @recipe.serving %>
</p>

<% unless @recipe.ingredients.blank? %>
  <p><strong>Ingredients</strong></p>

  <% @recipe.ingredients.each do |ingredient| %>
    <p><%= ingredient.food_item.name %> : <%= ingredient.volume %></p>
  <% end %>
<% end %>

  <hr>

  <div id="comments_count">
    <h4><%= pluralize(@comments.count, 'comment') %></h4>
  </div>

  <% unless @comments.blank? %>
  <div id="comments_list">
    <% @comments.each do |comment| %>
      <% unless comment.user.blank? %>
    <div class="media" id="comment-id-<%= comment.id %>">
      <a class="pull-left" href="#">
        <%= image_tag(gravatar_url(comment.user), width: 38, class: "img-circle") %>
      </a>
      <div class="media-body">
        <div class="media-heading">
          <strong><%= comment.user.first_name %></strong>
        </div> 
        <p>
          <%= comment.content %>
          
          <% if current_user == comment.user %>
          <span style="font-size:12px;">
            <%= link_to 'Delete', recipe_comment_path(@recipe, comment), method: :delete, remote: true %>  
          </span>
          <% end %>
        </p>
      </div>
    </div>
    <% end %>
    <% end %>
  </div>
  <% end %>

 <%= render 'comments/form' %>

<hr>
<%= link_to 'Edit', edit_recipe_path(@recipe) %> |
<%= link_to 'Back', recipes_path %> | 
<%= link_to 'Destroy', @recipe, method: :delete, data: { confirm: 'Are you sure?' } %>

